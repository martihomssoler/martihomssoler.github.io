{% extends "base.html" %}

{% block breadcrumbs %}
<a class="text-c0d font-medium hover:underline" href="/">Home</a>
{% set_global path = "" %}
{% for ancestor in section.components %}
{% set_global path = path ~ "/" ~ ancestor %}
<span class="text-c05"> / </span>
{% set title = ancestor | replace(from="-", to=" ") | title %}
{% if loop.last %}
<a class="text-c0d font-medium hover:underline" href="{{path}}/">{{ title | truncate(length=12) }}</a>
{% else %}
<a class="text-c0d font-medium hover:underline" href="{{path}}/">{{ title | truncate(length=12) }}</a>
{% endif %}
{% endfor %}
{% endblock breadcrumbs %}

{% block content %}

<div class="flex flex-col items-center text-center pt-[8rem] pb-[4rem] space-y-4">
  <h1 class="text-5xl font-extrabold w-4/5 max-w-[75rem]">
    {{ section.title }}
  </h1>
  <p class="text-xl font-mono w-4/5 max-w-[75rem]"> {{ section.description }} </p>
</div>
{% if section.pages | length == 0 %}
<div class="flex items-center justify-center text-center">
  <p class="text-lg font-mono text-c04"> For now, it's pretty empty... </p>
</div>
{% else %}
<div class="grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-4 gap-6 px-8 py-8 min-w-4xl mx-auto">
  {% for page in section.pages %}
  <article class="group flex flex-col
      p-6 rounded-xl 
      bg-c01 border border-c04 shadow-sm
      hover:bg-c02 hover:border-c0d hover:-translate-y-1 hover:shadow-lg
      transition-all duration-300 ease-out
    ">
    <a href="{{ page.permalink | safe }}" class="block">
      <!-- Article Cover Image -->
      <div class="rounded-lg overflow-hidden
          bg-c00 border border-c04 mb-4 
        ">
        {% for asset in page.assets -%}
        {%- if asset is matching("image[.](jpg|svg|svg|webp)$") -%}
        <img class="
            h-64 w-full
            object-cover group-hover:scale-[1.02] transition-transform duration-300" src="{{ get_url(path=asset) }}" />
        {%- endif %}
        {%- endfor %}
      </div>

      <!-- Article Info -->
      <div class="space-y-4 flex-grow">
        <h3 class="text-xl font-bold leading-tight group-hover:text-c0d transition-colors duration-200">
          {{ page.title }}
        </h3>

        <!-- Publishing Date -->
        <div class="flex items-center justify-center text-sm text-c05">
          <i class="fa-solid fa-calendar w-4 h-4 mr-2 text-c09"></i>
          <time datetime="{{ page.date }}">
            {{ page.date | date(format="%b %-d, %Y", timezone="Europe/Berlin") }}
          </time>
        </div>

        <!-- Content Preview -->
        <p class="text-sm text-c06 leading-relaxed">
          {{ page.content | striptags | truncate(length=400) }}
        </p>

        <!-- Metadata -->
        <div class="flex items-center justify-between text-xs text-c05 bg-c00 rounded-lg px-3 py-2 mt-auto">
          <span class="flex items-center">
            <i class="fa-solid fa-pencil w-3 h-3 mr-1.5"></i>
            {{ page.word_count }} words
          </span>
          <span class="flex items-center">
            <i class="fa-regular fa-clock w-3 h-3 mr-1.5"></i>
            {{ page.reading_time }} min read
          </span>
        </div>
      </div>
    </a>
  </article>
  {% endfor %}
</div>
{% endif %}

{% endblock content %}